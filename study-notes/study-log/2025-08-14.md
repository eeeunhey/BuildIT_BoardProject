# 2025-08-14 â€” LogoutController ì£¼ì†Œ ë¬¸ì œ í•´ê²° ê¸°ë¡

---

## ğŸ“ ë¬¸ì œ ìƒí™©  
- `LogoutController`ë¥¼ ë§Œë“¤ì—ˆëŠ”ë° ë¡œê·¸ì•„ì›ƒ URLë¡œ ì´ë™ì´ ì•ˆ ë¨.  
- í´ë¦­ ì‹œ **404 ì—ëŸ¬** ë°œìƒ â†’ ì„œë²„ê°€ `/logout.do` ìš”ì²­ì„ ëª» ë°›ìŒ.  

---

## ğŸ” ì›ì¸ ë¶„ì„  
1. **URL ê²½ë¡œ ë¬¸ì œ**
   - JSPì—ì„œ `href="logout.do"` ë˜ëŠ” `href="/logout.do"`ë¥¼ ì‚¬ìš© â†’  
     ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ(`/í”„ë¡œì íŠ¸ëª…`)ê°€ ëˆ„ë½ë˜ê±°ë‚˜ ìƒëŒ€ê²½ë¡œë¡œ ì˜ëª» ìš”ì²­ë¨.
2. **bean.properties ë§¤í•‘ ë¬¸ì œ**
   - `/logout.do` í‚¤ê°€ ì—†ê±°ë‚˜, íŒ¨í‚¤ì§€Â·í´ë˜ìŠ¤ëª…ì´ ë¶ˆì¼ì¹˜.
3. **Front Controller URL íŒ¨í„´ ë¬¸ì œ**
   - `web.xml`ì—ì„œ `*.do`ë¡œ ë§¤í•‘ë˜ì§€ ì•ŠìŒ.
4. **ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œ ëˆ„ë½**
   - Controllerì—ì„œ `index.do`ë¡œ ë°”ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ â†’ ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ ë¹ ì§.

---

## ğŸ›  í•´ê²° ë°©ë²•  

### 1) JSP ë§í¬ ì ˆëŒ€ê²½ë¡œë¡œ ìˆ˜ì •  
```jsp
<a href="${pageContext.request.contextPath}/logout.do">ë¡œê·¸ì•„ì›ƒ</a>
```
ë˜ëŠ” ë²„íŠ¼ ë°©ì‹:
```jsp
<button id="logoutBtn" data-ctx="${pageContext.request.contextPath}">ë¡œê·¸ì•„ì›ƒ</button>
<script>
  document.getElementById('logoutBtn').onclick = (e) => {
    const ctx = e.currentTarget.getAttribute('data-ctx') || '';
    location.href = ctx + '/logout.do'; // ì ˆëŒ€ê²½ë¡œ ì´ë™
  };
</script>
```

---

### 2) bean.properties ë§¤í•‘ í™•ì¸  
```properties
/logout.do=kr.ac.kopo.controller.LogoutController
```
- **ìŠ¬ë˜ì‹œ í¬í•¨ í•„ìˆ˜** (`/logout.do`)  
- í´ë˜ìŠ¤ ê²½ë¡œ/íŒ¨í‚¤ì§€ ì •í™•íˆ ë§ì¶”ê¸°  

---

### 3) web.xml URL íŒ¨í„´ í™•ì¸  
```xml
<servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
```
- `*.do`ë¡œ ì„¤ì •í•´ì•¼ `/logout.do` ìš”ì²­ì„ Front Controllerê°€ ë°›ìŒ.

---

### 4) LogoutController ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œ ìˆ˜ì •  
```java
public class LogoutController implements Controller {
    @Override
    public String handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        HttpSession session = request.getSession(false);
        if (session != null) session.invalidate();

        // ë°©ë²• 1: í”„ë ˆì„ì›Œí¬ì—ì„œ redirect: ì§€ì› ì‹œ
        return "redirect:/index.do";

        // ë°©ë²• 2: ì§ì ‘ ë¦¬ë‹¤ì´ë ‰íŠ¸
        // response.sendRedirect(request.getContextPath() + "/index.do");
        // return null;
    }
}
```

---

## ğŸ“Œ ë°°ìš´ ì   
- JSPì—ì„œ URLì€ **í•­ìƒ ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ í¬í•¨ ì ˆëŒ€ê²½ë¡œ**ë¡œ ì‘ì„±í•´ì•¼ ì•ˆì „í•˜ë‹¤.  
- bean.propertiesì™€ web.xmlì˜ URL ë§¤í•‘ì´ ì •í™•í•˜ì§€ ì•Šìœ¼ë©´ 404ê°€ ë‚œë‹¤.  
- Controllerì—ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œ **ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ**ë¥¼ ë°˜ë“œì‹œ ë¶™ì—¬ì•¼ í•œë‹¤.  
- ë¡œê·¸ ì¶œë ¥ìœ¼ë¡œ `request.getRequestURL()` / `request.getContextPath()`ë¥¼ í™•ì¸í•˜ë©´ ì›ì¸ íŒŒì•…ì´ ë¹¨ë¼ì§„ë‹¤.  

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸  
- [x] ë©”ë‰´/ë²„íŠ¼ ë§í¬ â†’ `${pageContext.request.contextPath}` í¬í•¨  
- [x] bean.propertiesì— `/logout.do` ë§¤í•‘  
- [x] web.xml `*.do` ë§¤í•‘  
- [x] Controller ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œ ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ í¬í•¨  
- [x] ë¡œê·¸ë¡œ ê²½ë¡œ í™•ì¸  
